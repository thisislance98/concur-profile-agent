parameters:
  # slots
  - name: first_name
    optional: true
  - name: last_name
    optional: true
  
  # from capability context
  - name: selected_capability_developer
    optional: true
  
action_groups:
  - condition: selected_capability_developer == null
    actions:
      - type: dialog-function
        name: select_cap_developer
        parameters:
          - name: first_name
            value: <? first_name ?>
          - name: last_name
            value: <? last_name ?>
          - name: subsequent_action_trigger
            value: "I want to appreciate the capability developer"
        result_variable: selected_capability_developer
      # unnest result
      - type: set-variables
        variables:
          - name: selected_capability_developer
            value: <? selected_capability_developer.selected_capability_developer ?>


  - condition: selected_capability_developer.id != null
    actions:
    - type: message
      message:
          type: illustrated_message
          content:
            illustration_name: tntSuccess
            title: Appreciation Successful
            subtitle: <? selected_capability_developer.first_name ?> <? selected_capability_developer.last_name ?>
    - type: message
      message:
        type: text
        content: I send an appreciation award to <? selected_capability_developer.first_name ?> <? selected_capability_developer.last_name ?> (<? selected_capability_developer.id ?>, working from <? selected_capability_developer.working_location ?>)
    - type: set-variables
      variables:
        - name: selected_capability_developer
          value: null

result:
  selected_capability_developer: <? selected_capability_developer ?>